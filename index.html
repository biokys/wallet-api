<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Wallet API : Description of REST API" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Wallet API</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/biokys/wallet-api">View on GitHub</a>

          <h1 id="project_title">Wallet API</h1>
          <h2 id="project_tagline">Description of REST API</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/biokys/wallet-api/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/biokys/wallet-api/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2>
<a name="basic-info" class="anchor" href="#basic-info"><span class="octicon octicon-link"></span></a>Basic info</h2>

<h3>
<a name="datetime" class="anchor" href="#datetime"><span class="octicon octicon-link"></span></a>Date&amp;time</h3>

<blockquote>
<p>All timestamps are returned in ISO 8601 format:</p>

<pre><code>YYYY-MM-DDTHH:MM:SSZ
</code></pre>
</blockquote>

<h3>
<a name="limits" class="anchor" href="#limits"><span class="octicon octicon-link"></span></a>Limits</h3>

<blockquote>
<p>Requests are limited by count per particular time. Information about those limits can be found in request's header:</p>

<pre><code>X-RateLimit-Remaining: 98
X-RateLimit-Limit: 100
</code></pre>

<p>When you reach the requests call limit you will see:</p>

<pre><code>HTTP/1.1 429 Client Error (429)
</code></pre>
</blockquote>

<h3>
<a name="http-codes" class="anchor" href="#http-codes"><span class="octicon octicon-link"></span></a>Http codes</h3>

<table>
<thead><tr>
<th>Http code</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td>200</td>
<td>Everything is ok</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden, authorization failed</td>
</tr>
<tr>
<td>400</td>
<td>Bad request, user passed wrong input data</td>
</tr>
<tr>
<td>404</td>
<td>Url not found</td>
</tr>
<tr>
<td>429</td>
<td>Too many requests</td>
</tr>
<tr>
<td>500</td>
<td>Internal error</td>
</tr>
</tbody>
</table><h2>
<a name="obtaining-a-token" class="anchor" href="#obtaining-a-token"><span class="octicon octicon-link"></span></a>Obtaining a token</h2>

<p>Sign-in to <a href="http://walletapp.net">Wallet web app</a>, go to User profile -&gt; Auth token section. Here you can generate your <strong>token</strong></p>

<h3>
<a name="manual-token-manipulation-have-to-be-signed-in" class="anchor" href="#manual-token-manipulation-have-to-be-signed-in"><span class="octicon octicon-link"></span></a>Manual token manipulation (have to be signed-in):</h3>

<p>Get token at <a href="http://wallet-test.herokuapp.com/auth-token">http://wallet-test.herokuapp.com/auth-token</a></p>

<p>Create token at <a href="http://wallet-test.herokuapp.com/auth-token/create">http://wallet-test.herokuapp.com/auth-token/create</a></p>

<p>Delete token at <a href="http://wallet-test.herokuapp.com/auth-token/delete">http://wallet-test.herokuapp.com/auth-token/delete</a></p>

<p><strong>Caution! Keep your token in secret. Everyone having your token could possibly change your data!</strong></p>

<h2>
<a name="authorization" class="anchor" href="#authorization"><span class="octicon octicon-link"></span></a>Authorization</h2>

<p>There are two ways how to handle authorization.</p>

<blockquote>
<p>Pass auth token as url param <strong>auth</strong>.</p>

<pre><code>curl http://wallet-test.herokuapp.com/api/v1/users?auth=TOKEN
</code></pre>

<p>By using BASIC authentication (user = auth, pass = TOKEN).</p>

<pre><code>curl -u auth:TOKEN http://wallet-test.herokuapp.com/api/v1/users
</code></pre>
</blockquote>

<p>When the authorization fail, you will get following http code</p>

<pre><code>HTTP/1.1 403 Forbidden
</code></pre>

<h2>
<a name="users" class="anchor" href="#users"><span class="octicon octicon-link"></span></a>Users</h2>

<h3>
<a name="retrieves-users" class="anchor" href="#retrieves-users"><span class="octicon octicon-link"></span></a>Retrieves users</h3>

<pre><code>GET /api/v1/users
</code></pre>

<p><strong>Response</strong></p>

<div class="highlight highlight-json"><pre><span class="p">[{</span>
    <span class="nt">"birth_year"</span><span class="p">:</span> <span class="mi">1900</span><span class="p">,</span>
    <span class="nt">"email"</span><span class="p">:</span> <span class="s2">"muller10@gmail.com"</span><span class="p">,</span>
    <span class="nt">"payment_plan"</span><span class="p">:</span> <span class="s2">"INDIVIDUAL"</span><span class="p">,</span>
    <span class="nt">"payment_period"</span><span class="p">:</span> <span class="s2">"y"</span><span class="p">,</span>
    <span class="nt">"licence_type"</span><span class="p">:</span> <span class="s2">"paymill"</span><span class="p">,</span>
    <span class="nt">"affiliate_id"</span><span class="p">:</span> <span class="s2">"none"</span><span class="p">,</span>
    <span class="nt">"last_web_access_at"</span><span class="p">:</span> <span class="s2">"2014-04-17T09:52:02.939Z"</span><span class="p">,</span>
    <span class="nt">"last_sync_at"</span><span class="p">:</span> <span class="s2">"2014-02-17T11:22:03.129Z"</span><span class="p">,</span>
    <span class="nt">"created_at"</span><span class="p">:</span> <span class="s2">"2014-01-12T13:28:39.279Z"</span><span class="p">,</span>
    <span class="nt">"modified_at"</span><span class="p">:</span> <span class="s2">"2014-04-25T19:50:18.878Z"</span><span class="p">,</span>
    <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"7e7e7387-fda1-4594-8dd0-9f1726113c45"</span>
<span class="p">}]</span>
</pre></div>

<h2>
<a name="accounts" class="anchor" href="#accounts"><span class="octicon octicon-link"></span></a>Accounts</h2>

<h3>
<a name="retrieves-all-accounts" class="anchor" href="#retrieves-all-accounts"><span class="octicon octicon-link"></span></a>Retrieves all accounts</h3>

<p><strong>Request</strong></p>

<pre><code>GET /api/v1/user/:user_id/accounts
</code></pre>

<p><strong>Response</strong></p>

<div class="highlight highlight-json"><pre><span class="p">[{</span>
    <span class="nt">"user_id"</span><span class="p">:</span> <span class="s2">"7e7e7387-fda1-4594-8dd0-9f1726113c45"</span><span class="p">,</span>
    <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"My personal account"</span><span class="p">,</span>
    <span class="nt">"gps"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">"init_amount"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">"order"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">"created_at"</span><span class="p">:</span> <span class="s2">"2014-01-12T13:28:39.279Z"</span><span class="p">,</span>
    <span class="nt">"modified_at"</span><span class="p">:</span> <span class="s2">"2014-04-25T19:50:18.878Z"</span><span class="p">,</span>
    <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"a48e9fca-1a21-48ae-8664-54f54db1f8a0"</span>
<span class="p">}]</span>
</pre></div>

<h3>
<a name="savecreate-new-account" class="anchor" href="#savecreate-new-account"><span class="octicon octicon-link"></span></a><del>Save/create new account</del>
</h3>

<pre><code>POST api/v1/user/:user_id/account/:account_id
</code></pre>

<h3>
<a name="delete-an-account" class="anchor" href="#delete-an-account"><span class="octicon octicon-link"></span></a><del>Delete an account</del>
</h3>

<pre><code>DELETE api/v1/user/:user_id/account/:account_id
</code></pre>

<h2>
<a name="categories" class="anchor" href="#categories"><span class="octicon octicon-link"></span></a>Categories</h2>

<h3>
<a name="retrieves-all-users-categories" class="anchor" href="#retrieves-all-users-categories"><span class="octicon octicon-link"></span></a>Retrieves all user's categories</h3>

<pre><code>GET /api/v1/user/:user_id/categories
</code></pre>

<p><strong>Response</strong></p>

<div class="highlight highlight-json"><pre><span class="p">[{</span>
    <span class="nt">"user_id"</span><span class="p">:</span> <span class="s2">"7e7e7387-fda1-4594-8dd0-9f1726113c45"</span><span class="p">,</span>
    <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"Car"</span><span class="p">,</span>
    <span class="nt">"color"</span><span class="p">:</span> <span class="s2">"#8601B0"</span><span class="p">,</span>
    <span class="nt">"icon_path"</span><span class="p">:</span> <span class="s2">"ic_cat_0101_car.png"</span><span class="p">,</span>
    <span class="nt">"icon_id"</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
    <span class="nt">"is_system_category"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nt">"default_type"</span><span class="p">:</span> <span class="s2">"expense"</span><span class="p">,</span>
    <span class="nt">"order"</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="nt">"created_at"</span><span class="p">:</span> <span class="s2">"2014-01-12T13:28:39.279Z"</span><span class="p">,</span>
    <span class="nt">"modified_at"</span><span class="p">:</span> <span class="s2">"2014-04-25T19:50:18.878Z"</span><span class="p">,</span>
    <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"406cfd10-6a3a-4cb3-9c81-6de8e552a681"</span>
<span class="p">}]</span>
</pre></div>

<h2>
<a name="currencies" class="anchor" href="#currencies"><span class="octicon octicon-link"></span></a>Currencies</h2>

<h3>
<a name="retrieves-all-users-currencies" class="anchor" href="#retrieves-all-users-currencies"><span class="octicon octicon-link"></span></a>Retrieves all user's currencies</h3>

<pre><code>GET /api/v1/user/:user_id/currencies
</code></pre>

<p><strong>Response</strong></p>

<div class="highlight highlight-json"><pre><span class="p">[{</span>
    <span class="nt">"user_id"</span><span class="p">:</span> <span class="s2">"7e7e7387-fda1-4594-8dd0-9f1726113c45"</span><span class="p">,</span>
    <span class="nt">"rate"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nt">"is_referential"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"Czech Republic Koruna"</span><span class="p">,</span>
    <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"CZK"</span><span class="p">,</span>
    <span class="nt">"symbol"</span><span class="p">:</span> <span class="s2">"CZK"</span><span class="p">,</span>
    <span class="nt">"order"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">"created_at"</span><span class="p">:</span> <span class="s2">"2014-01-12T13:28:39.279Z"</span><span class="p">,</span>
    <span class="nt">"modified_at"</span><span class="p">:</span> <span class="s2">"2014-04-25T19:50:18.878Z"</span><span class="p">,</span>
    <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"c8e54a22-81f9-4034-acd3-59003f004a29"</span>
<span class="p">}]</span>
</pre></div>

<h2>
<a name="records" class="anchor" href="#records"><span class="octicon octicon-link"></span></a>Records</h2>

<h3>
<a name="retrieves-all-records-in-particular-account" class="anchor" href="#retrieves-all-records-in-particular-account"><span class="octicon octicon-link"></span></a>Retrieves all records in particular account</h3>

<pre><code>GET /api/v1/user/:user_id/account/:account_id/records
</code></pre>

<p><strong>Response</strong></p>

<div class="highlight highlight-json"><pre><span class="p">[{</span>
    <span class="nt">"account_id"</span><span class="p">:</span> <span class="s2">"a48e9fca-1a21-48ae-8664-54f54db1f8a0"</span><span class="p">,</span>
    <span class="nt">"category_id"</span><span class="p">:</span> <span class="s2">"a43e0592-bb0e-4fb1-b9d4-4899978562bd"</span><span class="p">,</span>
    <span class="nt">"currency_id"</span><span class="p">:</span> <span class="s2">"c8e54a22-81f9-4034-acd3-59003f004a29"</span><span class="p">,</span>
    <span class="nt">"payment_type"</span><span class="p">:</span> <span class="s2">"cash"</span><span class="p">,</span>
    <span class="nt">"amount"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nt">"record_type"</span><span class="p">:</span> <span class="s2">"expense"</span><span class="p">,</span>
    <span class="nt">"record_date"</span><span class="p">:</span> <span class="s2">"2014-01-26T19:47:06.203Z"</span><span class="p">,</span>
    <span class="nt">"note"</span><span class="p">:</span> <span class="s2">"Holiday in US, ~~hid:b42ef64b-8c91-48e8-af0f-a0db85a2e5b1"</span><span class="p">,</span>
    <span class="nt">"warranty_in_months"</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
    <span class="nt">"gps_latitude"</span><span class="p">:</span> <span class="mf">40.001312</span><span class="p">,</span>
    <span class="nt">"gps_longitude"</span><span class="p">:</span> <span class="mf">12.355275</span><span class="p">,</span>
    <span class="nt">"gps_accuracy"</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="nt">"created_at"</span><span class="p">:</span> <span class="s2">"2014-01-12T13:28:39.279Z"</span><span class="p">,</span>
    <span class="nt">"modified_at"</span><span class="p">:</span> <span class="s2">"2014-04-25T19:50:18.878Z"</span><span class="p">,</span>
    <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"00ef6be1-2652-43d1-947a-4a8b74460902"</span>
<span class="p">}]</span>
</pre></div>

<h3>
<a name="retrieves-particular-record-by-record-id" class="anchor" href="#retrieves-particular-record-by-record-id"><span class="octicon octicon-link"></span></a>Retrieves particular record by record id</h3>

<pre><code>GET /api/v1/record/:record_id
</code></pre>

<p><strong>Reponse</strong></p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"account"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"user_id"</span><span class="p">:</span> <span class="s2">"7e7e7387-fda1-4594-8dd0-9f1726113c45"</span><span class="p">,</span>
        <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"My personal account"</span><span class="p">,</span>
        <span class="nt">"gps"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">"init_amount"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">"order"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">"created_at"</span><span class="p">:</span> <span class="s2">"2014-01-12T13:28:39.279Z"</span><span class="p">,</span>
        <span class="nt">"modified_at"</span><span class="p">:</span> <span class="s2">"2014-04-25T19:50:18.878Z"</span><span class="p">,</span>
        <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"a48e9fca-1a21-48ae-8664-54f54db1f8a0"</span>
    <span class="p">},</span>
    <span class="nt">"category"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"user_id"</span><span class="p">:</span> <span class="s2">"7e7e7387-fda1-4594-8dd0-9f1726113c45"</span><span class="p">,</span>
        <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"Food"</span><span class="p">,</span>
        <span class="nt">"color"</span><span class="p">:</span> <span class="s2">"#FF6B6B"</span><span class="p">,</span>
        <span class="nt">"icon_path"</span><span class="p">:</span> <span class="s2">"ic_cat_0301_eating_out.png"</span><span class="p">,</span>
        <span class="nt">"icon_id"</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
        <span class="nt">"is_system_category"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">"default_type"</span><span class="p">:</span> <span class="s2">"expense"</span><span class="p">,</span>
        <span class="nt">"order"</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span>
        <span class="nt">"created_at"</span><span class="p">:</span> <span class="s2">"2014-01-12T13:28:39.279Z"</span><span class="p">,</span>
        <span class="nt">"modified_at"</span><span class="p">:</span> <span class="s2">"2014-04-25T19:50:18.878Z"</span><span class="p">,</span>
        <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"a43e0592-bb0e-4fb1-b9d4-4899978562bd"</span>
    <span class="p">},</span>
    <span class="nt">"currency"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"user_id"</span><span class="p">:</span> <span class="s2">"7e7e7387-fda1-4594-8dd0-9f1726113c45"</span><span class="p">,</span>
        <span class="nt">"rate"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">"is_referential"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"Czech Republic Koruna"</span><span class="p">,</span>
        <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"CZK"</span><span class="p">,</span>
        <span class="nt">"symbol"</span><span class="p">:</span> <span class="s2">"CZK"</span><span class="p">,</span>
        <span class="nt">"order"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">"created_at"</span><span class="p">:</span> <span class="s2">"2014-01-12T13:28:39.279Z"</span><span class="p">,</span>
        <span class="nt">"modified_at"</span><span class="p">:</span> <span class="s2">"2014-04-25T19:50:18.878Z"</span><span class="p">,</span>
        <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"c8e54a22-81f9-4034-acd3-59003f004a29"</span>
    <span class="p">},</span>
    <span class="nt">"payment_type"</span><span class="p">:</span> <span class="s2">"cash"</span><span class="p">,</span>
    <span class="nt">"amount"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nt">"record_type"</span><span class="p">:</span> <span class="s2">"expense"</span><span class="p">,</span>
    <span class="nt">"record_date"</span><span class="p">:</span> <span class="s2">"2014-01-26T19:47:06.203Z"</span><span class="p">,</span>
    <span class="nt">"note"</span><span class="p">:</span> <span class="s2">"My new car"</span><span class="p">,</span>
    <span class="nt">"warranty_in_months"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">"gps_latitude"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">"gps_longitude"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">"gps_accuracy"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">"created_at"</span><span class="p">:</span> <span class="s2">"2014-01-12T13:28:39.279Z"</span><span class="p">,</span>
    <span class="nt">"modified_at"</span><span class="p">:</span> <span class="s2">"2014-04-25T19:50:18.878Z"</span><span class="p">,</span>
    <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"00ef6be1-2652-43d1-947a-4a8b74460902"</span>
<span class="p">}</span>
</pre></div>

<h3>
<a name="search" class="anchor" href="#search"><span class="octicon octicon-link"></span></a>Search</h3>

<pre><code>GET api/v1/search/records?q=query&amp;sort=sorting_attribute&amp;order=[asc|desc]&amp;page=number&amp;per_page=number
</code></pre>

<p><strong>Url params table</strong></p>

<table>
<thead><tr>
<th>Keyword</th>
<th>Default value</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td>q</td>
<td>None</td>
<td>Query for search</td>
</tr>
<tr>
<td>sort</td>
<td>date</td>
<td>Attribute used for sorting. Possible values are: amount, record_date, payment_type, type, warranty, latitude, longitude</td>
</tr>
<tr>
<td>order</td>
<td>asc</td>
<td>asc=Ascending, desc=Descending</td>
</tr>
<tr>
<td>page</td>
<td>1</td>
<td>page number to retrieve</td>
</tr>
<tr>
<td>per_page</td>
<td>20</td>
<td>items per page</td>
</tr>
</tbody>
</table><p><strong>Query table</strong></p>

<table>
<thead><tr>
<th>Keyword</th>
<th>Possible values</th>
<th>Operators</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td>account</td>
<td>account_id</td>
<td>none</td>
<td></td>
</tr>
<tr>
<td>category</td>
<td>category_id</td>
<td>none</td>
<td></td>
</tr>
<tr>
<td>currency</td>
<td>currency_id</td>
<td>none</td>
<td></td>
</tr>
<tr>
<td>payment_type</td>
<td>cash, debit_card, credit_card, transfer, voucher, mobile_payment, web_payment</td>
<td>none</td>
<td></td>
</tr>
<tr>
<td>amount</td>
<td>positive floating number</td>
<td>&lt;, &gt;, &lt;=, &gt;=</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>income, expense</td>
<td>none</td>
<td></td>
</tr>
<tr>
<td>record_date</td>
<td>unix timestamp in UTC</td>
<td>&lt;, &gt;, &lt;=, &gt;=</td>
<td></td>
</tr>
<tr>
<td>note</td>
<td></td>
<td>%</td>
<td></td>
</tr>
<tr>
<td>warranty</td>
<td>positive integer</td>
<td>&lt;, &gt;, &lt;=, &gt;=</td>
<td></td>
</tr>
<tr>
<td>latitude</td>
<td>real number</td>
<td>&lt;, &gt;, &lt;=, &gt;=</td>
<td></td>
</tr>
<tr>
<td>longitude</td>
<td>real number</td>
<td>&lt;, &gt;, &lt;=, &gt;=</td>
<td></td>
</tr>
</tbody>
</table><blockquote>
<p>Following example request searches for record with amount between 2000 exclusive and 10000 inclusive, taking only incomes, payment type is credit card and contains note starting by word Cars</p>

<pre><code>http://wallet-test.herokuapp.com/api/v1/search/records?page=1&amp;per_page=10&amp;q=payment_type:credit_card+amount:&gt;2000+amount:&lt;=10000+type:income+note:Cars
</code></pre>
</blockquote>

<h3>
<a name="create-new-records" class="anchor" href="#create-new-records"><span class="octicon octicon-link"></span></a>Create new record(s)</h3>

<p>Create or update one or more records. When record id is specified, record is updated, otherwise is created. Data has to be sent inside POST request in JSON format specified by table below. </p>

<pre><code>POST /api/v1/user/:user_id/records
</code></pre>

<p><strong>Input (json)</strong></p>

<table>
<thead><tr>
<th>Property</th>
<th>Mandatory</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><strong>id</strong></td>
<td>false</td>
<td>Record id (when not specified, new record is created)</td>
</tr>
<tr>
<td>
<strong>account_id</strong> or <strong>account_name</strong>*</td>
<td>true</td>
<td>the account</td>
</tr>
<tr>
<td>
<strong>category_id</strong> or <strong>category_name</strong>*</td>
<td>true</td>
<td>the category</td>
</tr>
<tr>
<td>
<strong>currency_id</strong> or <strong>currency_code</strong>*</td>
<td>true</td>
<td>the currency</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>true</td>
<td>must be bigger than 0</td>
</tr>
<tr>
<td><strong>record_type</strong></td>
<td>true</td>
<td>possible values: income, expense</td>
</tr>
<tr>
<td><strong>payment_type</strong></td>
<td>true</td>
<td>possible values: cash, debit_card, credit_card, transfer, voucher, mobile_payment, web_payment</td>
</tr>
<tr>
<td><strong>record_date</strong></td>
<td>true</td>
<td>ex.: 2014-04-21T15:10:23Z</td>
</tr>
<tr>
<td><strong>note</strong></td>
<td>false</td>
<td>record note</td>
</tr>
<tr>
<td><strong>warranty_in_month</strong></td>
<td>false</td>
<td>the warranty in month.</td>
</tr>
<tr>
<td><strong>gps_latitude</strong></td>
<td>false</td>
<td>the gps latitude</td>
</tr>
<tr>
<td><strong>gps_longitude</strong></td>
<td>false</td>
<td>the gps longitude</td>
</tr>
<tr>
<td><strong>gps_accuracy</strong></td>
<td>false</td>
<td>the accuracy in meters</td>
</tr>
</tbody>
</table><p>* <em>object of this name must exist, otherwise error will be returned</em></p>

<p><strong>Example</strong></p>

<div class="highlight highlight-json"><pre><span class="p">[{</span>
    <span class="nt">"payment_type"</span><span class="p">:</span><span class="s2">"credit_card"</span><span class="p">,</span> 
    <span class="nt">"record_type"</span><span class="p">:</span><span class="s2">"income"</span><span class="p">,</span> 
    <span class="nt">"record_date"</span><span class="p">:</span><span class="s2">"2014-04-20T20:10:15Z"</span><span class="p">,</span> 
    <span class="nt">"amount"</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span> 
    <span class="nt">"currency_code"</span><span class="p">:</span><span class="s2">"CZK"</span><span class="p">,</span> 
    <span class="nt">"account_name"</span><span class="p">:</span><span class="s2">"My personal account"</span><span class="p">,</span> 
    <span class="nt">"category_name"</span><span class="p">:</span><span class="s2">"Car"</span>
<span class="p">}]</span>
</pre></div>

<p><strong>Response</strong></p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"error_objects"</span><span class="p">:[{</span>
        <span class="nt">"record"</span><span class="p">:{</span>
            <span class="err">...received_record_object...</span>
        <span class="p">},</span>
        <span class="nt">"failed_property"</span><span class="p">:</span><span class="s2">"&lt;name_of_property&gt;"</span><span class="p">,</span>
        <span class="nt">"description"</span><span class="p">:</span><span class="s2">"&lt;problem_description&gt;"</span>
    <span class="p">}],</span>
    <span class="nt">"created_object_ids"</span><span class="p">:[</span>
        <span class="s2">"&lt;id_1&gt;"</span><span class="p">,</span>
        <span class="s2">"&lt;id_2&gt;"</span><span class="p">,</span>
        <span class="s2">"&lt;id_3&gt;"</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>

<p><strong>Example - successful response</strong></p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"error_objects"</span><span class="p">:[],</span>
    <span class="nt">"created_object_ids"</span><span class="p">:[</span>
        <span class="s2">"f25538f2-7d49-4e0c-9bfd-dd67c90be434"</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>

<p><strong>Example - failed response (record_type wasn't set)</strong></p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"error_objects"</span><span class="p">:[{</span>
        <span class="nt">"record"</span><span class="p">:{</span>
            <span class="nt">"account_name"</span><span class="p">:</span><span class="s2">"My personal account"</span><span class="p">,</span>
            <span class="nt">"category_name"</span><span class="p">:</span><span class="s2">"Car"</span><span class="p">,</span>
            <span class="nt">"currency_code"</span><span class="p">:</span><span class="s2">"CZK"</span><span class="p">,</span>
            <span class="nt">"amount"</span><span class="p">:</span><span class="mf">100.0</span><span class="p">,</span>
            <span class="nt">"record_date"</span><span class="p">:</span><span class="s2">"2014-04-20T20:10:15Z"</span><span class="p">,</span>
            <span class="nt">"warranty_in_months"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="nt">"failed_property"</span><span class="p">:</span><span class="s2">"record_type"</span>
    <span class="p">}],</span>
    <span class="nt">"created_object_ids"</span><span class="p">:[]</span>
<span class="p">}</span>
</pre></div>

<blockquote>
<p>When everything is ok, you will receive result object with empty error_objects array and non-empty array created_object_ids filled with ids of created objects in the same order, the objects where received.</p>

<p>There is a limit 10.000 objects per minute. </p>
</blockquote>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Wallet API maintained by <a href="https://github.com/biokys">biokys</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-21672105-8");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
